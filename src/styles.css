/* styles.css — Merged v3.6.3 + additions (non‑wrapping, halos, H‑lines) */

/* -------- Brand color tokens -------- */
:root{
  --eastway-blue: #0B4B8C;
  --eastway-green:#0C6B4D;
  --cms-light:    #DAE9F6;

  --ink:          #0F172A;
  --ink-2:        #334155;
  --ink-3:        #64748B;
  --border:       #CBD5E1;
  --border-2:     #E2E8F0;
  --bg-subtle:    #F1F5F9;
  --card:         #FFFFFF;

  --t-green:  #10B981;
  --t-yellow: #F59E0B;
  --t-red:    #EF4444;
}

*{ box-sizing: border-box; }

html, body, #root{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
  color: var(--ink);
  background: #f7fafc;
}

.container{ max-width:1100px; margin: 24px auto; padding: 0 16px; }
.header{
  background: linear-gradient(90deg, var(--eastway-blue), var(--eastway-green));
  color:white;
  padding: 18px 20px;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(15,42,67,.12);
  margin-bottom: 18px;
}
.brand{ font-weight: 900; font-size: 28px; }
.subtitle{ font-weight: 700; opacity: .9; margin-top: 4px; }

.row{ display:flex; gap: 16px; align-items:center; justify-content:center; flex-wrap: wrap; }

/* Buttons */
.button{ border-radius:12px; padding:10px 14px; border:1px solid var(--border); background:#fff; cursor:pointer; font-weight:700; }
.button.primary{ background:var(--cms-light); color:#05223c; border-color:transparent; }
.button.success{ background:var(--t-green); color:white; border-color:#0ea371; }
.button.big-under{ margin-top:12px; }
.button:disabled{ background:#e2e8f0; color:#94a3b8; border-color:#e2e8f0; cursor:not-allowed; box-shadow:none; }

/* Cards & panes */
.panes{ display:grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap:16px; align-items:start; }
.card{
  background: var(--card);
  border: 1px solid var(--border-2);
  border-radius: 14px;
  padding: 16px;
  box-shadow: 0 2px 10px rgba(0,0,0,.04);
  min-width: 0;
}

/* Text helpers */
.muted{ color: var(--ink-3); }
.muted.small{ font-size: .9rem; }
.mt-8{ margin-top:8px; } .mt-10{ margin-top:10px; } .ml-6{ margin-left:6px; } .ml-12{ margin-left:12px; }
.center{ justify-content:center; display:flex; }
.chips{ display:flex; flex-wrap:wrap; gap:10px; }
.chips.center{ justify-content:center; }

/* Scale Factor visuals */
.shape-area{ position:relative; }
.rects{
  display:flex; gap:32px; align-items:flex-start; justify-content:center; margin-bottom:12px;
  max-width: 100%;
  overflow: visible;
}
.rect{ position:relative; background:#ffffff; border:2px solid #111827; border-radius:10px; overflow:visible; }
.rect.copy{ background:#F5FAFF; }

.shape-label-center{
  position:absolute; bottom:10px; left:50%; transform: translateX(-50%);
  font-weight: 900; color: #b91c1c; font-size: clamp(22px, 3.8vw, 36px);
}

/* Side number tags — dynamic offset */
.side-tag{
  position:absolute; font-weight:900; background:#fff; border-radius:999px;
  border:2px solid #111827; box-shadow: 0 2px 0 rgba(0,0,0,.10); z-index:40; user-select:none; color:#0b1220;
  white-space: nowrap; /* never wrap */
}
.side-tag.top{    top:    calc(var(--badge-offset, 24px) * -1); left:50%; transform:translateX(-50%); padding: var(--badge-pad-v) var(--badge-pad-h); font-size: var(--badge-font); }
.side-tag.bottom{ bottom: calc(var(--badge-offset, 24px) * -1); left:50%; transform:translateX(-50%); padding: var(--badge-pad-v) var(--badge-pad-h); font-size: var(--badge-font); }
.side-tag.left{   left:   calc(var(--badge-offset, 24px) * -1); top:50%;  transform:translateY(-50%);  padding: var(--badge-pad-v) var(--badge-pad-h); font-size: var(--badge-font); }
.side-tag.right{  right:  calc(var(--badge-offset, 24px) * -1); top:50%;  transform:translateY(-50%);  padding: var(--badge-pad-v) var(--badge-pad-h); font-size: var(--badge-font); }

/* Wide click targets (Step 1 only) */
.rect .side-hit{ position:absolute; background: transparent; z-index: 20; }
.rect .side-hit.top{    top:-10px; left:0; right:0; height:34px; cursor:pointer; }
.rect .side-hit.left{   left:-10px; top:0; bottom:0; width:34px;  cursor:pointer; }
.rect .side-hit.chosen{ background: rgba(245,158,11,.18); } /* yellow */
.rect .side-hit.good{   background: rgba(16,185,129,.18); } /* green */

/* Fractions, chips */
.error.big-red{ color:#b91c1c; font-weight:800; font-size:1.06rem; }
.fraction-row{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.fraction{ display:grid; grid-template-rows: auto auto; align-items:center; justify-items:center; min-width: 120px; }
.fraction.mini-frac{ width:96px; }
.fraction > .frac-bar{ grid-row:2; width:100%; height:2px; background:#111827; border-radius:2px; }
.slot{ display:inline-flex; min-width:80px; justify-content:center; border:1px dashed var(--border); border-radius:8px; padding:8px 12px; }

.calc-row{ display:flex; align-items:center; gap:10px; flex-wrap:nowrap; overflow-x:auto; }
.stack-op{ display:grid; grid-template-rows:auto auto; row-gap:10px; justify-items:center; min-width:72px; }
.chip-tiny{ padding:6px 10px !important; }

/* Compute grid */
.compute-grid{
  display:grid;
  grid-template-columns: minmax(120px,1fr) 24px minmax(140px,1fr) 24px minmax(140px,1fr);
  align-items:end;
  gap: 16px;
}
.compute-grid .op{ text-align:center; font-weight:900; font-size:1.2rem; }

/* Chips with borders */
.chips.with-borders > *{
  border: 2px solid var(--border) !important;
  background: #fff !important;
  border-radius: 12px !important;
  padding: 8px 12px !important;
  font-weight: 800;
  cursor: grab;
  user-select: none;
  box-shadow: 0 2px 0 rgba(0,0,0,.06);
}
.chips.with-borders > *:active{ cursor: grabbing; }

/* Non-wrapping chips globally */
.chip, .side-tag { white-space: nowrap; }

/* H‑Table lines */
.hwrap, .hwrap .hgrid{ background:transparent !important; border:none !important; box-shadow:none !important; }
.hwrap .hline{ position:absolute; pointer-events:none; }
.hwrap .hline.horiz{ left:0; right:0; top:50%; border-top:4px solid #334155; transform:translateY(-2px); }
.hwrap .hline.vert1{ top:0; bottom:0; left:33.333%; border-left:4px solid #334155; transform:translateX(-2px); }
.hwrap .hline.vert2{ top:0; bottom:0; left:66.666%; border-left:4px solid #334155; transform:translateX(-2px); }

/* H‑Table empty state */
.hwrap .empty{ outline:2px dashed #94a3b8; outline-offset:-6px; border-radius:10px; }
.hwrap .hhead .empty, .hwrap .hcell .empty{
  background: repeating-linear-gradient(45deg, rgba(148,163,184,.15), rgba(148,163,184,.15) 6px, transparent 6px, transparent 12px);
}

/* Halo feedback */
.side-tag.chosen{ outline: 3px solid #fbbf24; box-shadow: 0 0 0 4px rgba(245,158,11,.25); }
.side-tag.good{   outline: 3px solid #10b981; box-shadow: 0 0 0 4px rgba(16,185,129,.18); }

/* Confetti container */
.sf-confetti{ position:fixed; left:0; right:0; top:0; bottom:0; pointer-events:none; overflow:hidden; z-index: 1000; }
.sf-confetti-piece{ position:absolute; top:-10vh; animation-name: fall; animation-timing-function: linear; }
@keyframes fall{
  0%{ transform: translateY(-10vh) rotate(0deg); opacity:1 }
  100%{ transform: translateY(110vh) rotate(360deg); opacity:.9 }
}
